
<!DOCTYPE html>
<html>
<title>Tutorials Section</title>

<head>
</head>

<body onload="loadTeacherTutorial()" >
    <div style="background:#1694EA;text-align:center;">
        <div style="padding:5px;">
            <img src="https://images.pexels.com/photos/1704488/pexels-photo-1704488.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" style="height:100px;width:100px;border-radius:50%" > 
        </div>
        <div style="color:white;padding:5px;">
            <label> Tutorial's Page </label> 
        </div>
    </div>    
    
    <div id="tutorialupload" style="margin-top:5px;box-shadow: 5px 5px 5px 5px grey;padding:10px;">
        <div id="tutorialupload-card">
                        
            <table style="width: 100%;text-align:center;">
                <tr>
                    <td>
                        <h4>Description : </h4><textarea rows="3" cols="30"> </textarea>
                    </td>
                    <td>
                        <h4> Link :</h4> <input type="text" style="width: 400px; height:40px;" >
                    </td>
                    <td>
                        <h4> Tutorial Code :</h4> T <input type="text" style="width: 200px; height:40px;" >
                    </td>
                    <td>
                        <button onclick="upload(this)"> Upload </button>
                        
                    </td>
                </tr>
            </table>
            
        </div>
    </div>
    
    <div id="tutorialsection-card" style="padding: 10px;">  </div>


    <script>
        function upload(e){
            debugger;
            var description = e.parentElement.parentElement.getElementsByTagName('td')[0].getElementsByTagName('textarea')[0].value;
            var link = e.parentElement.parentElement.getElementsByTagName('td')[1].getElementsByTagName('input')[0].value;
            var Tcode = e.parentElement.parentElement.getElementsByTagName('input')[1].value;
            var obj = {
                'des':description,// ' key '  :  value   disctionary in python {key : value}
                'link':link,
                'Tcode':Tcode,
            }
            if( link.length==0 || Tcode.length==0 ){
                alert("Please give link and Tutorial code correctly")
            }
            else{
                //xml
                var xhttp = new XMLHttpRequest();
                xhttp.open("POST", "uploadtutorial", true);
                xhttp.send( JSON.stringify(obj) );
                xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                        alert(this.responseText);
                }
                };
            }
            
            
        }

        function loadTeacherTutorial(){
            debugger;
            result="";
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", "loadTeachersTutorial", true);
            xhttp.send();
            xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                    data = JSON.parse( this.responseText) ;
                    for(var i=0;i<data.data.length;i++){
                        result1 = "<td><label>Description : </label><br><br><label>"+(data.data[i].description)+"</label></td>"
                        result2 = "<td><label>Link : </label><br><br><a href='"+(data.data[i].link)+"' target='_blank'> "+(data.data[i].link)+" </a></td>"
                        result3 = "<td><label>T-Code : </label><br><br><label>"+(data.data[i].code)+"</label></td>"
                        result4 = "<td><button onclick='deleteTutorial(this)'> Delete </button></td>"
                        result = result+"<div  style='margin-top:5px;box-shadow: 5px 5px 5px 5px grey;padding:10px;margin-top:20px;'><table style='width: 100%;text-align:center;'><tr>"+result1+result2+result3+result4+"</tr></table></div>"
                    }
                    document.getElementById('tutorialsection-card').innerHTML = result;

               }
            };
        }

        function deleteTutorial(e){
            debugger;
            var ecode = e.parentElement.parentElement.getElementsByTagName('label')[4].innerHTML.trim();
            var obj = { 'ecode':ecode }
            var xhttp = new XMLHttpRequest();
            xhttp.open("POST", "deleteTutorial", true);
            xhttp.send(JSON.stringify(obj));
            xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                    alert(this.responseText);
                }
            };
        }

    </script>
</body>

</html>